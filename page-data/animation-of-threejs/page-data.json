{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/animation-of-threejs/",
    "result": {"data":{"cur":{"id":"0422bbe8-b6f7-5dec-8776-9074461c7ea6","html":"<p>애니메이션 함수로 <strong>requestAnimationFrame</strong>을 사용하는 이유는 해당 포스팅을 참고해주세요. 😘</p>\n<div class=\"embedded-linkin\">\n<a href=\"https://jieunhanme.github.io/javascript-animation-loop/\" target=\"_blank\" >\n<div class=\"linkin-info\">추천 포스팅</div>\n<div class=\"linkin-title\">어떤 Animation Loop를 사용하는게 좋을까?</div>\n</a>\n</div>\n<br />\n<h2 id=\"-화면-주사율에-따른-애니메이션-진행도-이슈란\" style=\"position:relative;\"><a href=\"#-%ED%99%94%EB%A9%B4-%EC%A3%BC%EC%82%AC%EC%9C%A8%EC%97%90-%EB%94%B0%EB%A5%B8-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%A7%84%ED%96%89%EB%8F%84-%EC%9D%B4%EC%8A%88%EB%9E%80\" aria-label=\" 화면 주사율에 따른 애니메이션 진행도 이슈란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😾 화면 주사율에 따른 애니메이션 진행도 이슈란?</h2>\n<p>애니메이션 효과를 부여할때 <strong>진행값을 기기 성능차를 고려하지 않는 값</strong>으로 정한다면 어떻게 될까요?\n이는 디스플레이의 <code class=\"language-text\">화면 주사율</code>에따라 <strong>애니메이션의 진행도가 다르게 표현되는 이슈가 발생</strong> 할 수 있어요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0klEQVQoz6VQW27DMAzz/U817ALDvrcTrOhHnTiS9eIgJ02C/mTABBCiZVqmVCICV2Gx4iqyVxERLMuC3juYeWQiGjwhveOnNtxqG/xZT835zTzPyF4lu7r7DjWHme3nCEc3B6sh/Lg7aw5trA1tCFbMYpCN2yZ8VAKJ4S9RRA3EgswiumY1dFGoGaap4fP9G/Xe4Lhe5DZywF+cJtJdZUUjgaqNWn5ydp+cGh8jp5uFOrjrcPUK6ro7PoNZxr7vtwc+3r7QJh6mCv4Z4QEVxXMbv7Vpds+NNarHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"화면 주사율에 따라 발생할 수 있는 애니메이션 진행도 이슈의 예시\"\n        title=\"화면 주사율에 따라 발생할 수 있는 애니메이션 진행도 이슈의 예시\"\n        src=\"/static/d6b393383fab70ee6067aed475e6472a/37523/animation-of-threejs-01.png\"\n        srcset=\"/static/d6b393383fab70ee6067aed475e6472a/e9ff0/animation-of-threejs-01.png 180w,\n/static/d6b393383fab70ee6067aed475e6472a/f21e7/animation-of-threejs-01.png 360w,\n/static/d6b393383fab70ee6067aed475e6472a/37523/animation-of-threejs-01.png 720w,\n/static/d6b393383fab70ee6067aed475e6472a/302a4/animation-of-threejs-01.png 1080w,\n/static/d6b393383fab70ee6067aed475e6472a/07a9c/animation-of-threejs-01.png 1440w,\n/static/d6b393383fab70ee6067aed475e6472a/6149e/animation-of-threejs-01.png 2784w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"img-caption\" style=\"margin: -20px 10px 0 10px \">\n1프레임당 1px씩 오른쪽으로 이동하는 애니메이션 생성 시, 화면 주사율에 따라 발생하는 이슈\n</p>\n<br />\n<p>메타몽을 <strong>1프레임당 우측으로 1px씩 나아가도록</strong> 설정했을 때, <code class=\"language-text\">30Hz</code>의 디스플레이에서는 0.5초(500ms)가 되었을 때 <strong>15px 이동</strong>한 것을 확인할 수 있어요.\n반면에 <code class=\"language-text\">60Hz</code>의 디스플레이에서는 0.5초가 되었을 때 <strong>30px 이동</strong>했죠. 이동 거리의 차이는 시간이 흐를수록 더 벌어질거에요.</p>\n<p>이는 유저가 동일한 화면 진행도를 유지해야하는 게임과 같은 화면에는 <code class=\"language-text\">치명적인 이슈</code>가 될 수 있는데요. 😱\n그렇다면, 디스플레이의 화면 주사율이 다른 경우 <strong>애니메이션의 진행도를 어떻게 동일하게 맞춰줄 수 있을까요?</strong></p>\n<p>지금부터, 다양한 화면 주사율에서 동일한 진행도를 유지할 수 있도록 <strong>애니메이션의 성능을 보정</strong>해봅시다.</p>\n<hr>\n<h2 id=\"-애니메이션의-성능을-보정해보자\" style=\"position:relative;\"><a href=\"#-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%98-%EC%84%B1%EB%8A%A5%EC%9D%84-%EB%B3%B4%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\" 애니메이션의 성능을 보정해보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😸 애니메이션의 성능을 보정해보자</h2>\n<p>해결방법은 간단합니다. 화면 주사율에 영향을 받지 않는 절대값인 <code class=\"language-text\">시간값</code>으로 애니메이션 진행도를 결정하면 됩니다.\n디스플레이별 프레임수는 다르더라도 <strong><code class=\"language-text\">절대값</code>인 시간을 기준으로 실행하기 때문에 진행도는 동일하게 유지</strong>됩니다.\n시간값으로 애니메이션을 진행하는 <strong>3가지 방법</strong>을 알아봅시다.</p>\n<br />\n<h3 id=\"-threejs의-내장-객체로-만들어보자\" style=\"position:relative;\"><a href=\"#-threejs%EC%9D%98-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\" aria-label=\" threejs의 내장 객체로 만들어보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⏰ Threejs의 내장 객체로 만들어보자</h3>\n<p><code class=\"language-text\">OBJ</code> <strong>Clock</strong>\n<br /></p>\n<blockquote>\n<p>시간 추적을 위한 객체입니다. 내부 연산에서 <code class=\"language-text\">performance.now</code>를 사용하려하고, 후순위로 <code class=\"language-text\">Date.now</code>를 사용합니다.</p>\n</blockquote>\n<h4 id=\"애니메이션이-진행된-후-총-경과-시간을-기준으로\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%B4-%EC%A7%84%ED%96%89%EB%90%9C-%ED%9B%84-%EC%B4%9D-%EA%B2%BD%EA%B3%BC-%EC%8B%9C%EA%B0%84%EC%9D%84-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C\" aria-label=\"애니메이션이 진행된 후 총 경과 시간을 기준으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애니메이션이 진행된 후 총 경과 시간을 기준으로</h4>\n<p><code class=\"language-text\">METHOD</code> <strong>getElapsedTime()</strong>\n<br /></p>\n<blockquote>\n<p>Clock객체가 생성된 이후의 총 경과 시간 값을 리턴합니다. 총 경과 시간이기 때문에 값은 계속 커집니다.</p>\n</blockquote>\n<p>애니메이션의 출력 횟수(프레임)는 달라도 <strong>총 경과된 시간은 동일</strong>하기에, 경과 시간을 기준으로 애니메이션의 진행율의 <code class=\"language-text\">일관성</code>을 유지할 수 있어요.\n단점으로 총 경과 시간값을 리턴하기 때문에 <strong>애니메이션의 조건 설정이 어려워지는 문제가 발생해요.</strong></p>\n<div class=\"codebox-title\">main.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> clock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">THREE<span class=\"token punctuation\">.</span>Clock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> clock<span class=\"token punctuation\">.</span><span class=\"token function\">getElapsedTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 총 경과값 이므로 +=가 아닌 = 로 연산 진행합니다.</span>\n  <span class=\"token comment\">// time에 숫자를 곱해 속도 조절을 할 수 있습니다.</span>\n  mesh<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">;</span>\n  mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> time<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  renderer<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> camera<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>draw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><video src=\"/63f8c71086d68436758937eccec7b52c/animation-of-threejs-02.mov\" loop muted Autoplay=autoplay style=\"width: 100%; height: 100%; object-fit: cover;\"></video></p>\n<p class=\"img-caption\" style=\"margin: -15px 10px 0 10px;\">\ntime값은 계속 증가하기 때문에, 3초가 지난 뒤에는 항상 조건식을 만족하게 되는데요. \n<br />\n시간값을 기준으로 위치값을 정하고 있기 때문에, 3초 뒤부터 mesh의 y값은 3보다 크기때문에 조건식에 걸려서  <b>항상 0으로 고정되는 문제가 발생해요.</b>\n</p>\n<h4 id=\"애니메이션이-진행될-때-마다의-시간-간격을-기준으로\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%B4-%EC%A7%84%ED%96%89%EB%90%A0-%EB%95%8C-%EB%A7%88%EB%8B%A4%EC%9D%98-%EC%8B%9C%EA%B0%84-%EA%B0%84%EA%B2%A9%EC%9D%84-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C\" aria-label=\"애니메이션이 진행될 때 마다의 시간 간격을 기준으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애니메이션이 진행될 때 마다의 시간 간격을 기준으로</h4>\n<p><code class=\"language-text\">METHOD</code> <strong>getDelta()</strong></p>\n<blockquote>\n<p>함수가 실행 될때마다의 시간 간격 값을 리턴하다. 실행될 때마다의 시간 간격값을 리턴하기 떄문에, <code class=\"language-text\">requestAnimationFrame</code> 함수 내부에서 사용할 경우 일정한 값을 리턴합니다.</p>\n</blockquote>\n<p><strong>getDelta</strong>는 함수 실행시 발생하는 시간 간격을 리턴하기 떄문에, <strong>getElapsedTime</strong>에서의 조건 설정이 어려운 점을 보완해줍니다.\n주의 사항으로는 getDelta와 getElapsedTime을 같이 쓰면 안되는 점이 있습니다. Threejs의 내부적인 이슈로 같이 사용하면 값이 꼬이는 경향이 있으므로 사용에 주의해야해요.</p>\n<div class=\"codebox-title\">main.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> clock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">THREE<span class=\"token punctuation\">.</span>Clock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> delta <span class=\"token operator\">=</span> clock<span class=\"token punctuation\">.</span><span class=\"token function\">getDelta</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 누적값이 아니므로 += 연산으로 진행합니다.</span>\n  mesh<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+=</span> <span class=\"token number\">1</span> <span class=\"token operator\">*</span> delta<span class=\"token punctuation\">;</span>\n  mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+=</span> delta<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  renderer<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> camera<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>draw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><video src=\"/bb7c1642ad797753c60da33af7ab11c3/animation-of-threejs-03.mov\" loop muted Autoplay=autoplay style=\"width: 100%; height: 100%; object-fit: cover;\"></video></p>\n<p class=\"img-caption\" style=\"margin: -15px 10px 0 10px;\">\n애니메이션의 조건 설정은 getDelta함수가 더 용이합니다.\n</p>\n<br />\n<h3 id=\"-javascript의-내장-객체로-만들어보자\" style=\"position:relative;\"><a href=\"#-javascript%EC%9D%98-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\" aria-label=\" javascript의 내장 객체로 만들어보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📅 Javascript의 내장 객체로 만들어보자</h3>\n<p>Javascript의 내장 객체로 Threejs의 Clock.getDelta()와 동일한 역할을 하는 로직을 만들 수 있어요.\n해당 방법은 Threejs뿐만 아니라, <strong>Canvas를 비롯해 javascript를 사용한다면 응용할 수 있다는 장점</strong>이 있습니다.</p>\n<p><code class=\"language-text\">METHOD</code> <strong>Date.now()</strong></p>\n<blockquote>\n<p>UTC기준으로 1970년 1월 1일 00:00:00 이후로 경과된 밀리세컨드값을 리턴합니다.</p>\n</blockquote>\n<div class=\"codebox-title\">main.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> oldTime <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// newTime : draw() 시작하는 시간</span>\n  <span class=\"token keyword\">const</span> newTime <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// deltaTime : oldTime선언 후 draw() 시작하기까지의 간격 시간값</span>\n  <span class=\"token keyword\">const</span> deltaTime <span class=\"token operator\">=</span> newTime <span class=\"token operator\">-</span> oldTime<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 반복 실행을 위해 draw가 실행했던 시간값을 oldTime으로 갱신</span>\n  oldTime <span class=\"token operator\">=</span> newTime<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 값이 크기때문에 소숫값을 곱해서 속도 조절을 해줘야합니다.</span>\n  mesh<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+=</span> <span class=\"token number\">0.001</span> <span class=\"token operator\">*</span> deltaTime<span class=\"token punctuation\">;</span>\n  mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+=</span> <span class=\"token number\">0.001</span> <span class=\"token operator\">*</span> deltaTime<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    mesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  renderer<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> camera<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>draw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><video src=\"/bb7c1642ad797753c60da33af7ab11c3/animation-of-threejs-03.mov\" loop muted Autoplay=autoplay style=\"width: 100%; height: 100%; object-fit: cover;\"></video></p>\n<p class=\"img-caption\" style=\"margin: -15px 10px 0 10px;\">\ngetDelta함수와 동일한 동작을 수행합니다.\n</p>\n<br />\n<h2 id=\"-애니메이션-성능-보정의-결과\" style=\"position:relative;\"><a href=\"#-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EC%A0%95%EC%9D%98-%EA%B2%B0%EA%B3%BC\" aria-label=\" 애니메이션 성능 보정의 결과 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😻 애니메이션 성능 보정의 결과</h2>\n<p><video src=\"/85c7cb6a719a8ec29deaf674e3111e82/animation-of-threejs-05.mov\" loop muted Autoplay=autoplay style=\"width: 100%; height: 100%; object-fit: cover;\"></video></p>\n<p class=\"img-caption\" style=\"margin: -15px 10px 0 10px;\">\n왼쪽은 10Hz, 오른쪽은 120Hz의 설정으로 동작하는 동일한 애니메이션입니다.\n</p>\n<br />\n<h2 id=\"-date와-performance는-무슨-차이가-있을까\" style=\"position:relative;\"><a href=\"#-date%EC%99%80-performance%EB%8A%94-%EB%AC%B4%EC%8A%A8-%EC%B0%A8%EC%9D%B4%EA%B0%80-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\" date와 performance는 무슨 차이가 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👀 Date와 performance는 무슨 차이가 있을까?</h2>\n<p>오늘의 설명에서 등장하지 않았지만, <code class=\"language-text\">performance.now()</code>를 <code class=\"language-text\">Date.now()</code>대신에 사용하는 예제를 종종 접했어요.<br>\n둘은 같은 역할을 하는 함수인데, 둘중 어느 함수가 더 나은 함수인지 굉장히 궁금했었는데 재밌는 비교 자료를 발견했습니다.</p>\n<a href=\"https://www.measurethat.net/Benchmarks/ShowResult/294105\" target=\"_blank\">\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADBElEQVQ4y41TS09TQRTuXzD+BFf+BQMbE5dioitY6cqFK42JiVbdgcbEmBiFhrIkSkB5CFQwBSqFIgi3LYIpoS2GQKWA3EfvY56fmdsWG6jAJF/mnJmT73znzJwAVqIXsJV4LK1CkP7ZCkpzJ4itZBCbC0Fsa0FsL1WgBfErGURBK+O3spNV+xEK2lMzPXkx0NU9eOPjWALvIt/QE0ngw/g8+kZn0DcyjYHxOQyOz/n78JcE5hNx9I/Noi+SQO/oDD5+nvVj3w/H8WksgYno15uBd8OxqxOLWcS0HPkynyGRmRU6MLFIR+PLdCS+TIemNDoUS9JIPE1nFzQ6Mp2mQ7EUjX5fp9OpDRpL5slUMu9NaVmMRuPNgcLWZhPKSyaW83J6aQ3a4gIAUT2u4L9LVoNXV360BNaz2SbGGLgQcruwI3f39mEYJkol24dllSp2yYdVKvue58H1PHgekUJKQShFKpVqCeRyuSbOuZ/JNAxpmgYopRBCnIhDeVL6CpWodPoooWlKXdd9wtNWmecUQtu2JWMcCuqM8fKuEqhyXdf1/SM4JExVCVUJKlOxWJSWZUIIDs4oGKPgjIF4Hvb2dmFaFgihqm9+kgr+EabqlFws7sI0LdCKUuYrZL66fy+vShW+QiFE/ZKliuGefNadxaU733HlfhK3nv/E9Sc/cPleCrdfZvAwnMPdN+t4EMpiV6cVYtQQpmsIJaTgRE4u7eB1Xw7tA3n0ThYQHsrjVU8GPdFtdAxs4EV3Bm/7N7BveEBZ5fEeVks2dEuWTAsArfnQqkxe45dtwZnfz7o9rD6KbTvScQgcV8GrATlme4SAEHLyoxiGIS3L8l+vzvf4H+r3UB3ati10XZeO40jGmFTBZ4Hqw6HCfD5/rfrr1ZTs7+37s3qWaamZGKnatrq62hLIZDJXXddR/WCmabKDgwOu6zq3bZu7rssdx/H3enDc8h0hhKp/ura21hxobW09FwqFGjo6OhrD4XBDV1dXQ2dnp/Ib2tvbT4WKUwiFQo1tbW3n/wIgDku4zvrBfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"시간 관련 함수 비교\" title=\"시간 관련 함수 비교\" src=\"/static/373526e41f97ad754015935b6327fa6a/37523/animation-of-threejs-06.png\" srcset=\"/static/373526e41f97ad754015935b6327fa6a/e9ff0/animation-of-threejs-06.png 180w,\n/static/373526e41f97ad754015935b6327fa6a/f21e7/animation-of-threejs-06.png 360w,\n/static/373526e41f97ad754015935b6327fa6a/37523/animation-of-threejs-06.png 720w,\n/static/373526e41f97ad754015935b6327fa6a/302a4/animation-of-threejs-06.png 1080w,\n/static/373526e41f97ad754015935b6327fa6a/07a9c/animation-of-threejs-06.png 1440w,\n/static/373526e41f97ad754015935b6327fa6a/93582/animation-of-threejs-06.png 1524w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</a>\n<p class=\"img-caption\" style=\"margin: -15px 10px 0 10px \">\n이미지 클릭 시, 새창에서 자세히 볼 수 있습니다.\n</p>\n<br />\n<p><strong><code class=\"language-text\">Date.now()</code>의 사용을 추천합니다.</strong> 😉</p>\n<hr>\n<p>오늘 알아본 3가지 방법을 사용한다면, <strong>프레임 차이에 의한 애니메이션의 부드러움은 차이가 발생</strong>할 수는 있지만 결과적으로는 <strong>동일한 진행도를 유지</strong>할 수 있습니다.</p>\n<p>틀린 설명 혹은 보충이 필요한 설명은 코멘트 달아주시면 감사하겠습니다! 🙏</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%ED%99%94%EB%A9%B4-%EC%A3%BC%EC%82%AC%EC%9C%A8%EC%97%90-%EB%94%B0%EB%A5%B8-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%A7%84%ED%96%89%EB%8F%84-%EC%9D%B4%EC%8A%88%EB%9E%80\">😾 화면 주사율에 따른 애니메이션 진행도 이슈란?</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%98-%EC%84%B1%EB%8A%A5%EC%9D%84-%EB%B3%B4%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90\">😸 애니메이션의 성능을 보정해보자</a></p>\n<ul>\n<li>\n<p><a href=\"#-threejs%EC%9D%98-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\">⏰ Threejs의 내장 객체로 만들어보자</a></p>\n<ul>\n<li><a href=\"#%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%B4-%EC%A7%84%ED%96%89%EB%90%9C-%ED%9B%84-%EC%B4%9D-%EA%B2%BD%EA%B3%BC-%EC%8B%9C%EA%B0%84%EC%9D%84-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C\">애니메이션이 진행된 후 총 경과 시간을 기준으로</a></li>\n<li><a href=\"#%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%B4-%EC%A7%84%ED%96%89%EB%90%A0-%EB%95%8C-%EB%A7%88%EB%8B%A4%EC%9D%98-%EC%8B%9C%EA%B0%84-%EA%B0%84%EA%B2%A9%EC%9D%84-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C\">애니메이션이 진행될 때 마다의 시간 간격을 기준으로</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-javascript%EC%9D%98-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\">📅 Javascript의 내장 객체로 만들어보자</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EC%A0%95%EC%9D%98-%EA%B2%B0%EA%B3%BC\">😻 애니메이션 성능 보정의 결과</a></p>\n</li>\n<li>\n<p><a href=\"#-date%EC%99%80-performance%EB%8A%94-%EB%AC%B4%EC%8A%A8-%EC%B0%A8%EC%9D%B4%EA%B0%80-%EC%9E%88%EC%9D%84%EA%B9%8C\">👀 Date와 performance는 무슨 차이가 있을까?</a></p>\n</li>\n</ul>\n</div>","excerpt":"애니메이션 함수로 requestAnimationFrame을 사용하는 이유는 해당 포스팅을 참고해주세요. 😘 😾 화면 주사율에 따른 애니메이션 진행도 이슈란? 애니메이션 효과를 부여할때 진행값을 기기 성능차를 고려하지 않는 값으로 정한다면 어떻게 될까요?\n이는 디스플레이의 에따라 애니메이션의 진행도가 다르게 표현되는 이슈가 발생 할 수 있어요.  메타몽을 1프레임당 우측으로 1px씩 나아가도록 설정했을 때, 의 디스플레이에서는 0.5초(500ms)가 되었을 때 15px 이동한 것을 확인할 수 있어요.\n반면에 의 디스플레이에서는 0.5초가 되었을 때 30px 이동했죠. 이동 거리의 차이는 시간이 흐를수록 더 벌어질거에요. 이는 유저가 동일한 화면 진행도를 유지해야하는 게임과 같은 화면에는 가 될 수 있는데요. 😱\n그렇다면, 디스플레이의 화면 주사율이 다른 경우 애니메이션의 진행도를 어떻게 동일하게 맞춰줄 수 있을까요? 지금부터, 다양한 화면 주사율에서 동일한 진행도를 유지할 수 있도록…","frontmatter":{"date":"May 10, 2022","title":"Three.js의 애니메이션 성능을 보정해보자","categories":"Threejs","author":"한지은","emoji":"👻"},"fields":{"slug":"/animation-of-threejs/"}},"next":{"id":"30d701da-72a2-5f93-8963-6967f9d24bce","html":"<h2 id=\"-계단-현상제거\" style=\"position:relative;\"><a href=\"#-%EA%B3%84%EB%8B%A8-%ED%98%84%EC%83%81%EC%A0%9C%EA%B1%B0\" aria-label=\" 계단 현상제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐝 계단 현상제거</h2>\n<div class=\"codebox-title\">main.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> renderer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">THREE<span class=\"token punctuation\">.</span>WebGLRenderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  canvas<span class=\"token punctuation\">,</span>\n  antialias<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 계단현상 제거 >> (미미한) 성능 저하 가능성 있음</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br />\n<h2 id=\"-픽셀-밀도에-따른-그래픽-최적화\" style=\"position:relative;\"><a href=\"#-%ED%94%BD%EC%85%80-%EB%B0%80%EB%8F%84%EC%97%90-%EB%94%B0%EB%A5%B8-%EA%B7%B8%EB%9E%98%ED%94%BD-%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\" 픽셀 밀도에 따른 그래픽 최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐝 픽셀 밀도에 따른 그래픽 최적화</h2>\n<blockquote>\n<p><strong>window.devicePixelRatio</strong> <br /> 해당 기기의 픽셀 밀도를 수치화해 반환합니다. 수치가 높을수록 고해상도 화면이 제공되어야 합니다.</p>\n</blockquote>\n<p>고해상도로 표현한다는 것은 canvas의 크기를 화면의 2배로 늘리고 해당 장면을 화면 크기로 압축해서 body에 표현하는 것을 의미합니다.\n<br /></p>\n<div class=\"codebox-title\">index.html - 최적화가 진행된 canvas 태그</div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>canvas</span>\n  <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>three-canvas<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">data-engine</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>three.js r138<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3024<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>934<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 1512px<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 467px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>canvas</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>window.devicePixelRatio의 값이 소수이거나 과하게 클경우 성능 저하가 발생할 수 있습니다.\n실제로는 1:1 혹은 2:1대응만 해준다면 화질에 문제가 없기때문에 1혹은 2의 비율로 그래픽 최적화를 진행합니다.</p>\n<div class=\"codebox-title\">main.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">renderer<span class=\"token punctuation\">.</span><span class=\"token function\">setPixelRatio</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>devicePixelRatio <span class=\"token operator\">></span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br />\n<h2 id=\"-화면-사이즈-자동-조절\" style=\"position:relative;\"><a href=\"#-%ED%99%94%EB%A9%B4-%EC%82%AC%EC%9D%B4%EC%A6%88-%EC%9E%90%EB%8F%99-%EC%A1%B0%EC%A0%88\" aria-label=\" 화면 사이즈 자동 조절 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐝 화면 사이즈 자동 조절</h2>\n<div class=\"codebox-title\">main.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 1. 카메라 조정(화면 사이즈 변경 === 카메라 종횡비 변경)</span>\n  camera<span class=\"token punctuation\">.</span>aspect <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>innerWidth <span class=\"token operator\">/</span> window<span class=\"token punctuation\">.</span>innerHeight<span class=\"token punctuation\">;</span>\n  camera<span class=\"token punctuation\">.</span><span class=\"token function\">updateProjectionMatrix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 2. renderer로 다시 그려주기</span>\n  renderer<span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>innerWidth<span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">.</span>innerHeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  renderer<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>scene<span class=\"token punctuation\">,</span> camera<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 리사이즈 이벤트 추가</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> setSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br />\n<h2 id=\"-배경색-색상-설정-및-투명도-조절\" style=\"position:relative;\"><a href=\"#-%EB%B0%B0%EA%B2%BD%EC%83%89-%EC%83%89%EC%83%81-%EC%84%A4%EC%A0%95-%EB%B0%8F-%ED%88%AC%EB%AA%85%EB%8F%84-%EC%A1%B0%EC%A0%88\" aria-label=\" 배경색 색상 설정 및 투명도 조절 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐝 배경색 색상 설정 및 투명도 조절</h2>\n<p>배경의 투명도는 <code class=\"language-text\">renderer</code>와 <code class=\"language-text\">scene</code>에서 조절해 줄 수 있습니다. <strong>두객체를 통해 같이 조절해줄 경우 배경색은 scene에서 설정한 값</strong>으로 덮어집니다.\n아래와 같이 진행 할 경우, 분홍색 배경으로 설정됩니다.</p>\n<div class=\"codebox-title\">main.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> renderer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">THREE<span class=\"token punctuation\">.</span>WebGLRenderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  canvas<span class=\"token punctuation\">,</span>\n  antialias<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  alpha<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// renderer.setClearAlpha(0)와 같은 결과</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrenderer<span class=\"token punctuation\">.</span><span class=\"token function\">setClearColor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x00ff00</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nscene<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">THREE<span class=\"token punctuation\">.</span>Color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pink'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.55555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABh0lEQVQoz6WRz0oCYRTF5wFatI1o2apVLyK1iVkFUSsfIVoVjkSUDxGJZUGkaTrpDBGjzjdZgZmNJpM6GtQiyj/j5NwbMzWkIIm2+HH4vnPu4cKl0jfXM/lKcbP0+up601rMS73OPJRVJq8+M3m1NhC5UmVkterKKeqWlMnNUspFYrGVe8SPjIzNbAHbsoLN+yK2BmBnGncFbGQL+J6WUeFFJ1XxnixAREBkkxpGEzpGBN3SoUhqyCaw5gssUWV/iDbiIiJPDOAIAEdwSAB40jE7qkdny1T54JQ2YilEjhgQFwE5gsPwM/NdeBjuXwhxMyxaamO//12IvGhh/41U2F3WZiXU2dE27JimiREjgBcpeDlOw/jYJ2w7nwCvBNBZAnamm57Cij9Eg3VlqYMcMU2AuAR4KYLqv4XpSQ28a0VAkoROTAI708P3LNbMKyu+E7odFfDzPIE625+/PJs2K2BpP7hC7a6uTwTdnrmg2+MIMr8ETHV7HOHNHUsDTK/fJzu/t7Yx9QXA0xP3JOiI6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"배경색 변경\"\n        title=\"배경색 변경\"\n        src=\"/static/65fbc0f799bb5b15ed500739611b0267/37523/tips-for-threejs-01.png\"\n        srcset=\"/static/65fbc0f799bb5b15ed500739611b0267/e9ff0/tips-for-threejs-01.png 180w,\n/static/65fbc0f799bb5b15ed500739611b0267/f21e7/tips-for-threejs-01.png 360w,\n/static/65fbc0f799bb5b15ed500739611b0267/37523/tips-for-threejs-01.png 720w,\n/static/65fbc0f799bb5b15ed500739611b0267/302a4/tips-for-threejs-01.png 1080w,\n/static/65fbc0f799bb5b15ed500739611b0267/07a9c/tips-for-threejs-01.png 1440w,\n/static/65fbc0f799bb5b15ed500739611b0267/f3d76/tips-for-threejs-01.png 3248w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-%EA%B3%84%EB%8B%A8-%ED%98%84%EC%83%81%EC%A0%9C%EA%B1%B0\">🐝 계단 현상제거</a></li>\n<li><a href=\"#-%ED%94%BD%EC%85%80-%EB%B0%80%EB%8F%84%EC%97%90-%EB%94%B0%EB%A5%B8-%EA%B7%B8%EB%9E%98%ED%94%BD-%EC%B5%9C%EC%A0%81%ED%99%94\">🐝 픽셀 밀도에 따른 그래픽 최적화</a></li>\n<li><a href=\"#-%ED%99%94%EB%A9%B4-%EC%82%AC%EC%9D%B4%EC%A6%88-%EC%9E%90%EB%8F%99-%EC%A1%B0%EC%A0%88\">🐝 화면 사이즈 자동 조절</a></li>\n<li><a href=\"#-%EB%B0%B0%EA%B2%BD%EC%83%89-%EC%83%89%EC%83%81-%EC%84%A4%EC%A0%95-%EB%B0%8F-%ED%88%AC%EB%AA%85%EB%8F%84-%EC%A1%B0%EC%A0%88\">🐝 배경색 색상 설정 및 투명도 조절</a></li>\n</ul>\n</div>","frontmatter":{"date":"April 05, 2022","title":"Threejs의 성능 향상에 도움을 주는 소소한 팁","categories":"Threejs","author":"한지은","emoji":"🍯"},"fields":{"slug":"/tips-for-threejs/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://jieunhanme.github.io","comments":{"utterances":{"repo":"jieunhanme/blog-comments"}}}}},"pageContext":{"slug":"/animation-of-threejs/","nextSlug":"/tips-for-threejs/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}